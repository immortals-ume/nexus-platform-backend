<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.20.xsd">

    <!-- Create schemas -->
    <changeSet id="001-create-schemas" author="auth-service">
        <sql>CREATE SCHEMA IF NOT EXISTS user_auth;</sql>
        <sql>CREATE SCHEMA IF NOT EXISTS user_audit;</sql>
        <rollback>
            <sql>DROP SCHEMA IF EXISTS user_audit CASCADE;</sql>
            <sql>DROP SCHEMA IF EXISTS user_auth CASCADE;</sql>
        </rollback>
    </changeSet>

    <!-- Create sequences -->
    <changeSet id="002-create-sequences" author="auth-service">
        <createSequence 
            schemaName="auth" 
            sequenceName="user_sequence"
            startValue="1"
            incrementBy="1"
            cacheSize="1"/>
        
        <createSequence 
            schemaName="auth" 
            sequenceName="user_address_sequence"
            startValue="1"
            incrementBy="1"
            cacheSize="1"/>
            
        <rollback>
            <dropSequence schemaName="auth" sequenceName="user_address_sequence"/>
            <dropSequence schemaName="auth" sequenceName="user_sequence"/>
        </rollback>
    </changeSet>

</databaseChangeLog>
