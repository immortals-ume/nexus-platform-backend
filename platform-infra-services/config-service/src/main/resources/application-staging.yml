# Staging Environment Configuration
spring:
  profiles:
    active: git
  cloud:
    config:
      server:
        git:
          uri: ${GIT_REPO_URI}
          username: ${GIT_USERNAME}
          password: ${GIT_PASSWORD}
          default-label: staging
          clone-on-start: true
          timeout: 10
  security:
    user:
      name: ${CONFIG_SERVER_USERNAME}
      password: ${CONFIG_SERVER_PASSWORD}

server:
  port: 8888

eureka:
  client:
    service-url:
      defaultZone: ${EUREKA_SERVER_URL:http://discovery-service:8761/eureka/}
  instance:
    prefer-ip-address: true
    instance-id: ${spring.application.name}:${spring.application.instance_id:${random.value}}

# Logging - moderate verbosity in staging
logging:
  level:
    root: INFO
    org.springframework.cloud.config: INFO
    com.example.config: INFO

# Observability - moderate sampling in staging
platform:
  observability:
    tracing:
      enabled: true
      sampling-rate: 0.5  # 50% sampling in staging
      zipkin-url: ${ZIPKIN_URL:http://zipkin:9411}
    logging:
      format: json  # JSON format for staging
      level: INFO

# Resilience4j - production-like settings
resilience4j:
  retry:
    configs:
      default:
        max-attempts: 3
        wait-duration: 100ms
  timelimiter:
    configs:
      default:
        timeout-duration: 5s
